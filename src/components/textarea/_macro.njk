{% macro onsTextarea(params) %}
    {% from "components/field/_macro.njk" import onsField %}

    {% call onsField({
        "id": params.fieldId,
        "legend": params.legend or params.label.text if params.mutuallyExclusive,
        "dontVisuallyHideLegend": params.dontVisuallyHideLegend,
        "description": params.label.description if params.mutuallyExclusive,
        "mutuallyExclusive": params.mutuallyExclusive,
        "classes": params.fieldClasses,
        "legendClasses": params.legendClasses
    }) %}
        {% if params.mutuallyExclusive  %}
            {% set textareaExlusiveClass = " js-exclusive-group" %}
        {% else %}
            {% from "components/label/_macro.njk" import onsLabel %}
            {{
                onsLabel({
                    "for": params.id,
                    "text": params.label.text,
                    "description": params.label.description,
                    "classes": params.label.classes
                })
            }}
        {% endif %}
        <textarea
            id="{{ params.id }}"
            class="input input--textarea {% if params.maxlength %} js-charlimit-input{% endif %}{{ textareaExlusiveClass }} {{ params.classes }}"
            name="{{ params.name }}"
            rows="{{ params.rows | default(8) }}"
            {% if params.maxlength %}
            maxlength="{{ params.maxlength }}"
            data-char-limit-ref="{{ params.id }}-lim-remaining"
            {% endif %}
            {% if params.attributes %}{% for attribute, value in (params.attributes.items() if params.attributes is mapping and params.attributes.items else params.attributes) %}{{ attribute }}{% if value %}="{{ value }}"{% endif %} {% endfor %}{% endif %}
        >{{ params.value }}</textarea>
        {% if params.maxlength %}
            <span
                id="{{ params.id }}-lim-remaining"
                class="input__limit u-mt-xs u-fs-s--b u-d-no"
                data-charcount-singular="{{ params.charCountSingular }}"
                data-charcount-plural="{{ params.charCountPlural }}">
            </span>
        {% endif %}
    {% endcall %}
{% endmacro %}
