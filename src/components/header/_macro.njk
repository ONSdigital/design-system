{% macro onsHeader(params) %}
  {% from "components/button/_macro.njk" import onsButton %}
  <header class="header {{ params.classes if params.classes }}">
      {% if params.phase %}
          {% from "components/phase-banner/_macro.njk" import onsPhaseBanner %}
          {{ onsPhaseBanner(params.phase) }}
      {% endif %}
      <div class="header__top" role="banner">
          <div class=" container{{ ' container--full-width' if params.fullWidth }}">
              <div class="header__grid-top grid grid--gutterless grid--flex grid--between grid--vertical-center grid--no-wrap">
                  <div class="grid__col col-auto">
                      <div class="logo">
                          <img src="{{ params.assetsURL if params.assetsURL }}/img/ons-logo-black-en-GB.svg" alt="Office for National Statistics logo" class="logo__img header__logo--print">
                          {% if params.logoHref %}<a href="{{ params.logoHref }}">{% endif %}
                              <img src="{{ params.assetsURL if params.assetsURL }}/img/{{ params.logo | default('ons-logo-pos') }}.svg" alt="Office for National Statistics logo" class="logo__img header__logo print__hidden">
                          {% if params.logoHref %}</a>{% endif %}
                      </div>
                  </div>
                  {% if params.language or params.serviceLinks %}
                      <div class="header__links grid__col col-auto">
                          {% if params.language %}
                              <div class="grid__col col-auto u-d-no@xs@m {{ 'u-mr-s@m' if params.serviceLinks }}">
                                  {% from "components/language-selector/_macro.njk" import onsLanguageSelector %}
                                  {{
                                      onsLanguageSelector(params.language)
                                  }}
                              </div>
                          {% endif %}
                          {% if params.serviceLinks %}
                              <div class="grid__col col-auto u-d-no@xs@m">
                                  <nav class="header-service-nav {{ params.serviceLinks.classes }}" aria-label="{{ params.serviceLinks.ariaLabel }}">
                                      <ul class="header-service-nav__list" aria-label="{{ params.serviceLinks.ariaListLabel }}" role="menubar">
                                          {% for item in (params.serviceLinks.itemsList if params.serviceLinks.itemsList is iterable else params.serviceLinks.itemsList.items()) %}
                                              <li class="header-service-nav__item">
                                                  <a href="{{ item.url }}" class="header-service-nav__link" role="menuitem">{{ item.text }}</a>
                                              </li>
                                          {% endfor %}
                                      </ul>
                                  </nav>
                              </div>
                          {% endif %}
                      </div>
                  {% endif %}
              </div>
          </div>
      </div>
      <div class="header__main">
          <div class="container{{ ' container--full-width' if params.fullWidth }}">
              <div class="grid grid--gutterless grid--flex grid--between grid--vertical-center grid--no-wrap">
                  <div class="grid__col col-auto u-flex-shrink">
                      <h1 class="header__title">{{ params.title }}</h1>
                      {% if params.desc %}
                          <p class="header__desc">{{ params.desc }}</p>
                      {% endif %}
                  </div>
                  {% if params.button %}
                      <div class="grid__col col-auto u-flex-no-shrink">
                          {{ onsButton({
                              "text": params.button.text,
                              "classes": "btn--ghost u-d-no@xs@m"
                          }) }}
                      </div>
                  {% endif %}
                  {% if params.toggleButton %}
                      <div class="grid__col col-auto u-flex-no-shrink">
                          {{ onsButton({
                              "buttonToggleAttributes": true,
                              "text": params.toggleButton.text,
                              "ariaControls": params.navigation.id,
                              "ariaLabel": params.toggleButton.ariaLabel,
                              "classes": "btn--mobile js-toggle-main"
                          }) }}
                      </div>
                  {% endif %}
              </div>
          </div>
      </div>
      {% if params.navigation %}
          <div class="header__bottom">
              <div class="container container--gutterless@xs@m{{ ' container--full-width' if params.fullWidth }}">
                  <nav class="header-nav header-nav--mobile js-header-nav" id="{{ params.navigation.id }}" aria-label="{{ params.navigation.ariaLabel }}">
                      <ul class="header-nav__list" aria-label="{{ params.navigation.ariaListLabel }}" role="menubar">
                          {% for item in (params.navigation.itemsList if params.navigation.itemsList is iterable else params.navigation.itemsList.items()) %}
                              <li class="header-nav__item {{ item.classes }}{{ ' header-nav__item--active' if (item.url == params.navigation.currentPath) or (item.url in params.navigation.currentPath) }}">
                                  <a href="{{ item.url }}" class="header-nav__link" role="menuitem">{{ item.title }}</a>
                              </li>
                          {% endfor %}
                      </ul>
                  </nav>
              </div>
          </div>
      {% endif %}
  </header>
{% endmacro %}
