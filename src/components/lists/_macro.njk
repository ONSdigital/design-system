{% macro onsList(params) %}
    {% set classes = params.classes | lower %}
    {% if params.element is defined %}
        {% set listEl = params.element | lower %}
    {% else %}
        {% set listEl = 'ul' %}
    {% endif %}

    <{{listEl}} {% if params.id is defined %}id="{{ params.id }}"{% endif %} class="list {{ params.classes }}">
        {%- for item in (params.itemsList if params.itemsList is iterable else params.itemsList.items()) -%}
            <li class="list__item {{ item.listclass }}" {% if item.current is defined %}aria-current="true"{% endif %}>
                {%- if item.index is defined or item.prefix is defined or item.prefixIcon is defined -%}
                    <span class="list__prefix"{% if listEl != 'ol' %} aria-hidden="true"{% endif %}>
                    {%- if item.prefixText is defined -%}
                        {{- item.prefixText -}}.
                    {%- elif (item.index is defined and listEl != 'ol') or (item.index is defined and listEl == 'ol' and 'list--bare' in classes) -%}
                        {{- loop.index -}}.
                    {% elif item.prefixIcon is defined %}
                        {% from "components/icons/_macro.njk" import onsIcon %}
                        {{
                            onsIcon({
                                "icon": item.prefixIcon
                            })
                        }}
                    {%- endif -%} </span>
                {%- endif -%}
                {%- if item.url is defined and item.current != true -%}
                    {%- if item.external is defined -%}
                        {% from "components/external-link/_macro.njk" import onsExternalLink %}
                        {{
                            onsExternalLink({
                                "url": item.url,
                                "linkText": item.text
                            })
                        }}
                    {%- else -%}
                        <a href="{{ item.url }}" class="list__link {{ item.classes }}" {% if item.index is defined %}data-qa="list-item-{{ loop.index }}"{% endif %} {% if item.target is defined %} target="{{ item.target }}"{% endif %} {% if item.name is defined %} name="{{ item.name }}"{% endif %}>
                            {%- if item.prefix is defined -%}<span class="u-vh">{{- item.prefix -}}</span>{%- endif -%} {{- item.text | safe -}}
                        </a>
                    {%- endif -%}
                {%- else -%}
                    {{- item.text | safe -}}
                {%- endif -%}
            </li>
        {%- endfor -%}
    </{{listEl}}>
{% endmacro %}
