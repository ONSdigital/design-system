{% macro onsField(params) %}
    {% if params.mutuallyExclusive or params.legend %}
        <fieldset{% if params.id %} id="{{ params.id }}"{% endif %} class="field{% if params.mutuallyExclusive %} field--exclusive{% endif %}{% if params.classes %} {{ params.classes }}{% endif %}"{% if params.description %} aria-describedby="{{ params.id }}-description"{% endif %}>
            <legend class="field__legend {{ params.legendClasses }}">{{ params.legend | safe }}</legend>
            {% if params.description %}
                <div id="{{ params.id }}-description" class="field__description">{{ params.description }}</div>
            {% endif %}
            {{ caller() }}
            {% if params.mutuallyExclusive %}
            {% from "components/checkboxes/_checkbox-macro.njk" import onsCheckbox %}
                <div class="field__item">
                    <div class="field__label u-fs-r--b">{{ params.mutuallyExclusive.or }}</div>
                    {{
                        onsCheckbox({
                            "id": params.mutuallyExclusive.checkbox.id,
                            "name": params.mutuallyExclusive.checkbox.name,
                            "value": params.mutuallyExclusive.checkbox.value,
                            "classes": params.mutuallyExclusive.checkbox.classes,
                            "inputClasses": "js-exclusive-checkbox",
                            "label": {
                                "text": '<span class="u-vh">' + params.mutuallyExclusive.or + ', </span> ' + params.mutuallyExclusive.checkbox.label.text + '<span class="u-vh">. ' +  params.mutuallyExclusive.deselectMessage + '</span>'
                            }
                        })
                    }}
                </div>
                <span class="js-exclusive-alert u-vh" role="alert" aria-live="polite" data-adjective="{{ params.mutuallyExclusive.deselectAdjective }}"></span>
            {% endif %} 
        </fieldset>
    {% else %}
        {% if not params.noField %}
            <div{% if params.id %} id="{{ params.id }}"{% endif %} class="field{% if params.classes %} {{ params.classes }}{% endif %}">
        {% endif %}
            {% if params.description %}
                <div class="field__description">{{ params.description }}</div>
            {% endif %}
            {{ caller() }}
        {% if not params.noField %}
            </div>
        {% endif %}
    {% endif %}
{% endmacro %}
