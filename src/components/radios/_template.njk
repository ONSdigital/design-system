{% from "components/field/_macro.njk" import onsField %}

{% call onsField({
    "id": params.id,
    "legend": params.legend,
    "description": params.description,
    "classes": params.classes,
    "legendClasses": params.legendClasses,
    "questionMode": params.questionMode
}) %}
    <div class="field__items">
        {% for radio in params.radios %}
            <div class="field__item">
                <div class="radio">
                    <input class="radio__input {{ radio.classes }}" name="{{ params.name }}" id="{{ radio.id }}" value="{{ radio.value }}" aria-labeledby="{{ params.id }}-label"{% if radio.checked %} checked{% endif %} type="radio"{% for attribute, value in radio.attributes %} {{ attribute }}="{{ value }}"{% endfor %}>
                    {# aria-hidden is used to prevent screen readers from being able to focus the individual elements within a label, and combined with aria-labeledby on the input to ensure the label is still read #}
                    <label id="{{ params.id }}-label" aria-hidden="true"  class="radio__label {{ radio.label.classes }}" for="{{ radio.id }}">
                        {{ radio.label.text | safe }}
                        {% if radio.label.description %}
                            <br>
                            <span class="radio__description u-fs-s">{{ radio.label.description }}</span>
                        {% endif %}
                    </label>
                    {% if radio.other %}
                        <div class="radio__other">
                            {% from "components/input/_macro.njk" import onsInput %}
                            {{
                                onsInput({
                                    "id": radio.other.id,
                                    "name": radio.other.name,
                                    "type": radio.other.type,
                                    "classes": "input--w-auto " + radio.other.classes | default(''),
                                    "attributes": radio.other.attributes,
                                    "label": {
                                        "text": radio.other.label.text,
                                        "classes": 'u-fs-s--b'
                                    }
                                })
                            }}
                        </div>
                    {% endif %}
                </div>
            </div>
            {% if not loop.last %}
                <br>
            {% endif %}
        {% endfor %}
    </div>
{% endcall %}
